{% extends 'base.html' %}
{% block content %}
<h1>{{ blog.title }}</h1>
<p>by {{ blog.author }} on {{ blog.timestamp }}</p>
<div>{{ blog.content|safe }}</div>
<hr>
<a href="{{ url_for('main.index') }}">Back to Home</a>

{% if blog.allow_comments %}
<h3>Comments</h3>
<form method="POST" action="{{ url_for('main.add_comment', blog_id=blog.id) }}">
    <textarea name="comment" rows="4" required></textarea>
    <button type="submit">Add Comment</button>
</form>
<div>
    {% for comment in blog.comments %}
    <div>
        <p>{{ comment.content }}</p>
        <p><small>by {{ comment.author }} on {{ comment.timestamp }}</small></p>
    </div>
    <hr>
    {% endfor %}
</div>
{% endif %}
{% endblock %}
