{% extends 'base.html' %}
{% block content %}
<h2>Write a New Blog Post</h2>
<form method="POST" action="" enctype="multipart/form-data">
    <div>
        <label for="title">Title</label>
        <input type="text" id="title" name="title" required>
    </div>
    <div>
        <label for="description">Description</label>
        <textarea id="description" name="description" rows="3" required></textarea>
    </div>
    <div>
        <label for="content">Content</label>
        <textarea id="content" name="content" rows="10" required></textarea>
        <button type="button" onclick="insertImageByUrl()">Insert Image by URL</button>
        <input type="file" id="uploadImage" name="uploadImage" accept="image/*" onchange="uploadImage()">
    </div>
    <div>
        <label for="thumbnail">Thumbnail</label>
        <input type="file" id="thumbnail" name="thumbnail" accept="image/*" required>
    </div>
    <div>
        <label for="allow_comments">Allow Comments</label>
        <input type="checkbox" id="allow_comments" name="allow_comments">
    </div>
    <div>
        <button type="submit">Submit</button>
    </div>
</form>
<script>
    function insertImageByUrl() {
        var url = prompt("Enter image URL:");
        if (url) {
            var content = document.getElementById('content');
            content.value += '<img src="' + url + '" alt="Image">';
        }
    }

    function uploadImage() {
        var fileInput = document.getElementById('uploadImage');
        var file = fileInput.files[0];
        if (file) {
            var reader = new FileReader();
            reader.onload = function (e) {
                var content = document.getElementById('content');
                content.value += '<img src="' + e.target.result + '" alt="Image">';
            }
            reader.readAsDataURL(file);
        }
    }
</script>
{% endblock %}
